# Simple Parking Management V 1.0-SNAPSHOT

# Design
## Overview
The project contains a server component and a client component. The server component uses an embedded Jetty to listen to
requests. The requests are made via HTTP-REST convention. The client talks to the server using the Jersey library. The simple
UI is built using Java FX. Guice is used for dependency injection. This is done to allow for a better decoupling of classes
as well as to increase the testability and configurability of components. Slf4j with a log4j2 backend is used for application-wide logging.

## Server
The class **ParkingManager** is responsible for managing the entry and exit of the parking lot. It uses a ReadWriteLock to
synchronize the access to the number of slots available on the parking lot and the list of vehicles that are currently parked.
For each of the entry / exit points, a single thread executor with an unbounded queue is created in order to allow the fact
that multiple cars can enter / exit different entry / exit points at the same time but only one car at a time can 
enter / exit a single entry / exit point. So if 5 cars try to enter entry point 1, then the cars would need to line up so they
can enter entry point 1 one at a time. Alternatively, 5 cars trying to enter entry points 1-5 can do so simultaneously.

The services that the ParkingManager offers is exposed to the world via an embedded Jetty. A simple rest interface was
created so that clients can talk to the services offered by the ParkingManager.

## Client
The client is a very simple Java FX application that talks to the server via its rest interface. It allows the users 
to simulate entering / exiting of a car one at a time as well as a simulated mode where continuous streams of cars try 
to enter and exit the parking lot. The latter functionality is useful for functional testing to ensure that the invariants
of the ParkingManager are not broken under concurrent use.

## Technologies Used
1. Java 1.8
2. Jetty
3. Guava / Guice
4. Lombok
5. Slf4j / Log4j2
6. Java FX
7. Jersey
8. Junit / Mockito
9. Maven / Checkstyle

# Building and Running
1. This project uses **Java 1.8** features. As such, please download JDK 1.8 update 60 prior to code compilation.
2. This project uses Maven as the build tool of choice. To build, go to the root folder of the project and type **mvn clean package**. 
   This should produce an uber-jar for both the client and the server on their respective target folders.
3. To run the server, go to parkingmanagement/server/target and then do **java -jar server-1.0-SNAPSHOT.jar <path to server config>**. 
   A sample config file file for the server is provided under **parkingmanagement/parkingmanagement/serverconfig.properties**. 
   The server should listen to port 5300 if the default configuration is used.
4. To run  the client, go to parkingmanagement/client/target and then do **java -jar client-1.0-SNAPSHOT.jar <path to client config>**.
   A sample config file file for the server is provided under **parkingmanagement/parkingmanagement/clientconfig.properties**.

# Note
1. If you want to open the project using an IDE, please install Lombok first in order for the IDE to recognize
the pre-generated code generated by Lombok. Instructions can be found in https://projectlombok.org/download.html
